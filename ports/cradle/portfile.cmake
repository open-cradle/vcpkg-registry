set(CRADLE_COMMIT_HASH "ea5cef218e7c70c59228ab8280ee330a96bba65e")

vcpkg_from_github(
  OUT_SOURCE_PATH SOURCE_PATH
  REPO open-cradle/cradle
  REF ${CRADLE_COMMIT_HASH}
  SHA512 6327142d833cc9b5ea65ba0b6749fa8bc8454630b9c6f75227d20d9fb4d5af965090801b5c03323f30271a1c7a329d4439d9dabb35cd29a301b6e8324f4413f3)

vcpkg_cmake_configure(
  SOURCE_PATH "${SOURCE_PATH}"
  OPTIONS
    -DCRADLE_IS_MAIN_PROJECT=OFF
    -DCRADLE_ENABLE_TESTING=OFF
    -DCRADLE_PREPROCESSOR_USAGE=GitCache
    -DCRADLE_COMMIT_HASH=${CRADLE_COMMIT_HASH})

vcpkg_cmake_install()
vcpkg_fixup_cmake_targets()

file(
  INSTALL "${SOURCE_PATH}/LICENSE"
  DESTINATION "${CURRENT_PACKAGES_DIR}/share/${PORT}"
  RENAME copyright)
